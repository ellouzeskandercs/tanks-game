(this["webpackJsonpgame-tanks"]=this["webpackJsonpgame-tanks"]||[]).push([[0],{20:function(t,e,i){},22:function(t,e,i){},23:function(t,e,i){},32:function(t,e,i){"use strict";i.r(e);var n,s=i(6),o=i.n(s),a=i(14),c=i.n(a),r=(i(20),i(21),i(22),i(2)),h=i(3),u=i(8),l=i(7),d=(i(23),i(4)),b=i.n(d),g=i(11),y=i(12),O=i(15),v=i(5),j=i.n(v),f=function(){function t(e,i){Object(r.a)(this,t),this.value=void 0,this.unit=void 0,this.value=e,this.unit=i}return Object(h.a)(t,[{key:"sin",value:function(){return t.sin(this)}},{key:"cos",value:function(){return t.cos(this)}}],[{key:"transformToRadians",value:function(e){return e.unit===n.RADIANS?e:new t(e.value*Math.PI/180,n.RADIANS)}},{key:"transformToDegrees",value:function(e){return e.unit===n.DEGREES?e:new t(180*e.value/Math.PI,n.DEGREES)}},{key:"transformToUnit",value:function(e,i){return e.unit===i?e:i===n.RADIANS?t.transformToRadians(e):t.transformToDegrees(e)}},{key:"sin",value:function(t){if(t.unit===n.DEGREES)return Math.sin(t.value*Math.PI/180);if(t.unit===n.RADIANS)return Math.sin(t.value);throw new Error("Could not compute sinus of this angle: unit was not radians or degrees")}},{key:"cos",value:function(t){if(t.unit===n.DEGREES)return Math.cos(t.value*Math.PI/180);if(t.unit===n.RADIANS)return Math.cos(t.value);throw new Error("Could not compute cosinus of this angle: unit was not radians or degrees")}},{key:"sum",value:function(e,i){return new t(e.value+t.transformToUnit(i,e.unit).value,e.unit)}},{key:"multiply",value:function(e,i){return new t(e.value*i,e.unit)}}]),t}();!function(t){t.DEGREES="degrees",t.RADIANS="radians"}(n||(n={}));var m={initBackgroundImage:{name:"init-background",path:"/tanks-game/assets/init-background.png",width:800,height:500}},p={tankImage:{name:"tank",path:"/tanks-game/assets/tank.png",width:40,height:30},obstacleImage:{name:"obstacle",path:"/tanks-game/assets/obstacle.png",width:274,height:82},cannonImage:{name:"cannon",path:"/tanks-game/assets/cannon.png",width:40,height:10},backgroundImage:{name:"background",path:"/tanks-game/assets/background.png",width:800,height:500},bulletImage:{name:"bullet",path:"/tanks-game/assets/bullet.png",width:15,height:8}},w=function(){function t(e,i,s,o){Object(r.a)(this,t),this.position=void 0,this.width=void 0,this.height=void 0,this.rotation=void 0,this.position=e,this.width=s,this.height=i,this.rotation=null!==o&&void 0!==o?o:{angle:new f(0,n.DEGREES),origin:e}}return Object(h.a)(t,[{key:"translate",value:function(e){var i={x:this.position.x+e.x,y:this.position.y+e.y},n={x:this.rotation.origin.x+e.x,y:this.rotation.origin.y+e.y};return new t(i,this.height,this.width,{origin:n,angle:this.rotation.angle})}},{key:"rotate",value:function(e){return new t(this.position,this.height,this.width,{origin:this.rotation.origin,angle:f.sum(this.rotation.angle,e)})}},{key:"getBounds",value:function(){var t=this,e={x:this.position.x,y:this.position.y},i={x:this.position.x-this.height*this.rotation.angle.sin(),y:this.position.y+this.height*this.rotation.angle.cos()},n={x:this.position.x+this.width*this.rotation.angle.cos()-this.height*this.rotation.angle.sin(),y:this.position.y+this.width*this.rotation.angle.sin()+this.height*this.rotation.angle.cos()},s={x:this.position.x+this.width*this.rotation.angle.cos(),y:this.position.y+this.width*this.rotation.angle.sin()},o=(this.rotation.origin.x-this.position.x)*this.rotation.angle.cos()-(this.rotation.origin.y-this.position.y)*this.rotation.angle.sin(),a=(this.rotation.origin.x-this.position.x)*this.rotation.angle.sin()+(this.rotation.origin.y-this.position.y)*this.rotation.angle.cos();return[e,i,n,s].map((function(e){return{x:e.x+t.rotation.origin.x-t.position.x-o,y:e.y+t.rotation.origin.y-t.position.y-a}}))}},{key:"isPointInside",value:function(t){var e={x:t.x-this.rotation.origin.x,y:t.y-this.rotation.origin.y},i=e.x?e.x>0?Math.atan(e.y/e.x):Math.PI+Math.atan(e.y/e.x):e.x>0?0:Math.PI,s=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)),o=s*f.sum(f.multiply(this.rotation.angle,-1),new f(i,n.RADIANS)).cos()+this.rotation.origin.x-this.position.x,a=s*f.sum(f.multiply(this.rotation.angle,-1),new f(i,n.RADIANS)).sin()+this.rotation.origin.y-this.position.y;return o<this.width&&a<this.height&&o>0&&a>0}},{key:"intersectWithLine",value:function(t){var e={x:t.point.x-this.rotation.origin.x,y:t.point.y-this.rotation.origin.y},i=e.x?e.x>0?Math.atan(e.y/e.x):Math.PI+Math.atan(e.y/e.x):e.x>0?0:Math.PI,s=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)),o=s*f.sum(f.multiply(this.rotation.angle,-1),new f(i,n.RADIANS)).cos()+this.rotation.origin.x-this.position.x,a=s*f.sum(f.multiply(this.rotation.angle,-1),new f(i,n.RADIANS)).sin()+this.rotation.origin.y-this.position.y,c=t.direction.y/t.direction.x,r=a-c*o;return{top:(this.height-r)/c>0&&(this.height-r)/c<this.width,right:c*this.width+r>0&&c*this.width+r<this.height,bottom:-r/c>0&&-r/c<this.width,left:r>0&&r<this.height}}}],[{key:"isPointInside",value:function(t,e){return t.isPointInside(e)}}]),t}(),x=function(){function t(e,i,n,s){Object(r.a)(this,t),this._scene=void 0,this._collidedTimes=0,this._bulletObject=void 0,this._scene=e,this._bulletObject=this._scene.add.sprite(i.x,i.y,"bullet"),this._scene.physics.world.enable(this._bulletObject),this._bulletObject.body.setVelocity(n*s.cos(),n*s.sin()),this._bulletObject.rotation=f.transformToRadians(s).value}return Object(h.a)(t,[{key:"_getObjectAsRectangle",value:function(t){var e={origin:_.getObjectTrigoCoordinates({x:t.body.x+t.originX*t.width,y:t.body.y+t.originY*t.height}),angle:new f(-t.angle,n.DEGREES)};return new w(_.getObjectTrigoCoordinates(t.body.position),t.body.width,t.body.height,e)}},{key:"setColliderWithTank",value:function(t){t.setBulletObjectCollider(this._bulletObject)}},{key:"setObstacleCollider",value:function(t){var e=this;this._scene.physics.add.overlap(this._bulletObject,t,(function(t,i){return e.histTest(t,i)}))}},{key:"histTest",value:function(e,i){var n=this._getObjectAsRectangle(this._bulletObject),s=new w(_.getObjectTrigoCoordinates(i.body.position),i.body.width,i.body.height),o=n.getBounds().reduce((function(t,e){return s.isPointInside(e)||t}),!1),a=s.getBounds().reduce((function(t,e){return n.isPointInside(e)||t}),!1);if(o||a){var c=s.intersectWithLine({point:_.getObjectTrigoCoordinates(this._bulletObject.body.center),direction:_.getObjectTrigoCoordinates(this._bulletObject.body.velocity)});this._collidedTimes<t.maxCollisionTimes?(this.reflect(c),this._collidedTimes=this._collidedTimes+1):this._bulletObject.destroy()}}},{key:"reflect",value:function(t){var e=_.getObjectTrigoCoordinates(this._bulletObject.body.velocity),i={x:(e.x>0?t.left:t.right)?-e.x:e.x,y:(e.y>0?t.bottom:t.top)?-e.y:e.y},n=i.x?i.x>0?Math.atan(i.y/i.x):Math.PI+Math.atan(i.y/i.x):i.x>0?0:Math.PI;this._bulletObject.body.setVelocity(i.y,i.x),this._bulletObject.rotation=Math.PI/2-n}}]),t}();x.maxCollisionTimes=2;var _=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(r.a)(this,t),this.destroyed=!1,this._containerObject=void 0,this._vehicleObject=void 0,this._cannonObject=void 0,this._scene=void 0,this._velocity=160,this._angularVelocity=80,this._scene=e,this._containerObject=this._scene.add.container(i,n),this._containerObject.setSize(80,80),this._vehicleObject=this._scene.add.sprite(0,0,"tank"),this._cannonObject=this._scene.add.sprite(0,0,"cannon"),this._cannonObject.setOrigin(0,.5),this._scene.physics.world.enable(this._containerObject),this._scene.physics.world.enable(this._vehicleObject),this._scene.physics.world.enable(this._cannonObject),this._containerObject.addAt(this._vehicleObject,0),this._containerObject.addAt(this._cannonObject,1)}return Object(h.a)(t,[{key:"_getObjectAsRectangle",value:function(e){var i={origin:t.getObjectTrigoCoordinates({x:e.body.x+e.originX*e.width,y:e.body.y+e.originY*e.height}),angle:new f(-e.angle,n.DEGREES)};return new w(t.getObjectTrigoCoordinates(e.body.position),e.body.width,e.body.height,i)}},{key:"setBulletObjectCollider",value:function(t){var e=this;this._scene.physics.add.overlap(this._containerObject,t,(function(t,i){return e.bulletHitTest(t,i)}))}},{key:"bulletHitTest",value:function(e,i){var n=this._getObjectAsRectangle(this._cannonObject),s=this._getObjectAsRectangle(this._vehicleObject),o=new w(t.getObjectTrigoCoordinates(i.body.position),i.body.width,i.body.height),a=n.getBounds().reduce((function(t,e){return o.isPointInside(e)||t}),!1),c=s.getBounds().reduce((function(t,e){return o.isPointInside(e)||t}),!1),r=o.getBounds().reduce((function(t,e){return s.isPointInside(e)||t}),!1),h=o.getBounds().reduce((function(t,e){return n.isPointInside(e)||t}),!1);(a||h||c||r)&&this.destroy()}},{key:"setObstacleCollider",value:function(t){var e=this;this._scene.physics.add.overlap(this._containerObject,t,(function(t,i){return e.colliderHitTest(t,i)}))}},{key:"colliderHitTest",value:function(e,i){var n=this._getObjectAsRectangle(this._cannonObject),s=this._getObjectAsRectangle(this._vehicleObject),o=new w(t.getObjectTrigoCoordinates(i.body.position),i.body.width,i.body.height),a=n.getBounds().reduce((function(t,e){return o.isPointInside(e)||t}),!1),c=s.getBounds().reduce((function(t,e){return o.isPointInside(e)||t}),!1),r=o.getBounds().reduce((function(t,e){return s.isPointInside(e)||t}),!1),h=o.getBounds().reduce((function(t,e){return n.isPointInside(e)||t}),!1);if(a||h||c||r){var u={x:this._containerObject.x-i.body.center.x,y:this._containerObject.y-i.body.center.y};this.pushTank(u,3)}}},{key:"pushTank",value:function(t,e){var i=new f(this._vehicleObject.angle,n.DEGREES);this._containerObject.x=this._containerObject.x+Math.sign(t.x)*Math.abs(i.cos())*e,this._containerObject.y=this._containerObject.y+Math.sign(t.y)*Math.abs(i.sin())*e}},{key:"pointCannonToPoint",value:function(t,e){this._cannonObject.rotation=b.a.Math.Angle.Between(this._containerObject.x,this._containerObject.y,t,e)}},{key:"moveToDirection",value:function(t){var e=new f(this._vehicleObject.angle,n.DEGREES),i=f.sum(e,f.multiply(t,-1));Math.pow(i.sin(),2)<.01&&Math.pow(i.cos(),2)>.81?(this._vehicleObject.body.setAngularVelocity(0),this._containerObject.body.setVelocity(t.cos()*this._velocity,t.sin()*this._velocity)):(this._vehicleObject.body.setAngularVelocity(i.sin()*i.cos()<0?this._angularVelocity:-this._angularVelocity),this._containerObject.body.setVelocity(0,0))}},{key:"fire",value:function(t,e){var i=new f(b.a.Math.Angle.Between(this._containerObject.x,this._containerObject.y,t,e),n.RADIANS),s={x:this._containerObject.body.center.x+i.cos()*this._cannonObject.body.width,y:this._containerObject.body.center.y+i.sin()*this._cannonObject.body.width};return new x(this._scene,s,250,i)}},{key:"stop",value:function(){this._vehicleObject.body.setAngularVelocity(0),this._containerObject.body.setVelocity(0,0)}},{key:"destroy",value:function(){this.destroyed=!0,this._vehicleObject.destroy(),this._cannonObject.destroy(),this._containerObject.destroy()}}],[{key:"getObjectTrigoCoordinates",value:function(t){return{x:t.y,y:t.x}}}]),t}();var T=function(t){Object(u.a)(i,t);var e=Object(l.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this,"gameScene")).obstacles=void 0,t.cursors=void 0,t.tank=void 0,t}return Object(h.a)(i,[{key:"preload",value:function(){var t=this;Object.values(p).forEach((function(e){return t.load.image(e.name,e.path)}))}},{key:"create",value:function(){this.add.image(400,250,"background"),this.cursors=this.input.keyboard.createCursorKeys(),this.obstacles=this.physics.add.staticGroup(),this.obstacles.create(400,350,"obstacle"),this.obstacles.create(200,150,"obstacle"),this.obstacles.create(550,150,"obstacle"),this.tank=new _(this,25,20),this.tank.setObstacleCollider(this.obstacles)}},{key:"update",value:function(){var t=this;if(this.tank.destroyed)this.scene.switch("initScene");else{var e=[this.cursors.up.isDown,this.cursors.right.isDown,this.cursors.down.isDown,this.cursors.left.isDown];e[0]&&e[2]||e[1]&&e[3]||!e.reduce((function(t,e){return t||e}),!1)?this.tank.stop():this.tank.moveToDirection(function(t){var e,i=Object(O.a)(t,4),s=i[0],o=i[1],a=i[2],c=i[3];if(function(t){t[t.TOP=-90]="TOP",t[t.TOPRIGHT=-45]="TOPRIGHT",t[t.RIGHT=0]="RIGHT",t[t.BOTTOMRIGHT=45]="BOTTOMRIGHT",t[t.BOTTOM=90]="BOTTOM",t[t.BOTTOMLEFT=135]="BOTTOMLEFT",t[t.LEFT=180]="LEFT",t[t.TOPLEFT=-135]="TOPLEFT"}(e||(e={})),j.a.isEqual([s,o,a,c],[!0,!1,!1,!1]))return new f(e.TOP,n.DEGREES);if(j.a.isEqual([s,o,a,c],[!0,!0,!1,!1]))return new f(e.TOPRIGHT,n.DEGREES);if(j.a.isEqual([s,o,a,c],[!1,!0,!1,!1]))return new f(e.RIGHT,n.DEGREES);if(j.a.isEqual([s,o,a,c],[!1,!0,!0,!1]))return new f(e.BOTTOMRIGHT,n.DEGREES);if(j.a.isEqual([s,o,a,c],[!1,!1,!0,!1]))return new f(e.BOTTOM,n.DEGREES);if(j.a.isEqual([s,o,a,c],[!1,!1,!0,!0]))return new f(e.BOTTOMLEFT,n.DEGREES);if(j.a.isEqual([s,o,a,c],[!1,!1,!1,!0]))return new f(e.LEFT,n.DEGREES);if(j.a.isEqual([s,o,a,c],[!0,!1,!1,!0]))return new f(e.TOPLEFT,n.DEGREES);throw new Error("Could not find the direction angle form input")}(e));var i=this.game.input.mousePointer;if(this.tank.pointCannonToPoint(i.x,i.y),i.leftButtonDown()){var s=this.tank.fire(i.x,i.y);s.setObstacleCollider(this.obstacles),setTimeout((function(){s.setColliderWithTank(t.tank)}),500)}}}}]),i}(b.a.Scene),k=function(t){Object(u.a)(i,t);var e=Object(l.a)(i);function i(){return Object(r.a)(this,i),e.call(this,"initScene")}return Object(h.a)(i,[{key:"_startGame",value:function(){this.scene.switch("gameScene")}},{key:"preload",value:function(){var t=this;Object.values(m).forEach((function(e){return t.load.image(e.name,e.path)}))}},{key:"create",value:function(){var t=this;this.add.image(400,250,"init-background");var e=this.add.text(350,250,"Start the game");e.setInteractive({useHandCursor:!0}),e.on("pointerdown",(function(){return t._startGame()}))}}]),i}(b.a.Scene),E=i(1),I=function(t){Object(u.a)(i,t);var e=Object(l.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(h.a)(i,[{key:"componentDidMount",value:function(){var t={type:b.a.AUTO,width:800,height:500,parent:"game-canvas",physics:{default:"arcade",arcade:{debug:!1}}},e=new T,i=new k,n=new b.a.Game(t);n.scene.add("gameScene",e),n.scene.add("initScene",i),n.scene.start("initScene")}},{key:"render",value:function(){return Object(E.jsx)("div",{className:"game-container",children:Object(E.jsxs)("div",{className:"d-flex",children:[Object(E.jsx)("div",{id:"game-canvas"}),Object(E.jsxs)("div",{className:"game-commands",children:[Object(E.jsxs)("div",{className:"game-command",children:[" ",Object(E.jsx)(g.a,{icon:y.a,className:"fa-w-16 command-icon"})," Move Tank "]}),Object(E.jsxs)("div",{className:"game-command",children:[" ",Object(E.jsx)(g.a,{icon:y.b,className:"fa-w-16 command-icon"})," Left click to shoot bullets "]}),Object(E.jsxs)("div",{className:"game-command",children:[" ",Object(E.jsx)(g.a,{icon:y.c,className:"fa-w-16 command-icon"})," Move mouse to move the cannon "]})]})]})})}}]),i}(s.Component);var M=function(){return Object(E.jsxs)("div",{className:"app-container",children:[Object(E.jsxs)("header",{class:"w-75",children:[Object(E.jsx)("h3",{class:"float-md-start mb-0",children:"Tanks Game"}),Object(E.jsxs)("nav",{class:"nav nav-masthead justify-content-center float-md-end",children:[Object(E.jsx)("a",{class:"nav-link active","aria-current":"page",href:"#",children:"Play"}),Object(E.jsx)("a",{class:"nav-link",href:"#",children:"Best scores"}),Object(E.jsx)("a",{class:"nav-link",href:"#",children:"Forum"})]})]}),Object(E.jsx)(I,{})]})},R=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,33)).then((function(e){var i=e.getCLS,n=e.getFID,s=e.getFCP,o=e.getLCP,a=e.getTTFB;i(t),n(t),s(t),o(t),a(t)}))};c.a.render(Object(E.jsx)(o.a.StrictMode,{children:Object(E.jsx)(M,{})}),document.getElementById("root")),R()}},[[32,1,2]]]);
//# sourceMappingURL=main.64063445.chunk.js.map