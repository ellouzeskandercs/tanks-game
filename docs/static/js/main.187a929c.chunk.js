(this["webpackJsonpgame-tanks"]=this["webpackJsonpgame-tanks"]||[]).push([[0],{20:function(t,i,e){},22:function(t,i,e){},23:function(t,i,e){},32:function(t,i,e){"use strict";e.r(i);var n,o=e(5),s=e.n(o),a=e(12),c=e.n(a),r=(e(20),e(21),e(22),e(2)),h=e(3),l=e(15),u=e(13),d=e(14),b=(e(23),e(6)),g=e.n(b),y=[{name:"tank",path:"tanks-game/assets/tank.png",width:40,height:30},{name:"obstacle",path:"/tanks-game/assets/obstacle.png",width:274,height:82},{name:"cannon",path:"/tanks-game/assets/cannon.png",width:40,height:10},{name:"background",path:"/tanks-game/assets/background.png",width:800,height:500},{name:"bullet",path:"/tanks-game/assets/bullet.png",width:15,height:8}],O=function(){function t(i,e){Object(r.a)(this,t),this.value=void 0,this.unit=void 0,this.value=i,this.unit=e}return Object(h.a)(t,[{key:"sin",value:function(){return t.sin(this)}},{key:"cos",value:function(){return t.cos(this)}}],[{key:"transformToRadians",value:function(i){return i.unit===n.RADIANS?i:new t(i.value*Math.PI/180,n.RADIANS)}},{key:"transformToDegrees",value:function(i){return i.unit===n.DEGREES?i:new t(180*i.value/Math.PI,n.DEGREES)}},{key:"transformToUnit",value:function(i,e){return i.unit===e?i:e===n.RADIANS?t.transformToRadians(i):t.transformToDegrees(i)}},{key:"sin",value:function(t){if(t.unit===n.DEGREES)return Math.sin(t.value*Math.PI/180);if(t.unit===n.RADIANS)return Math.sin(t.value);throw new Error("Could not compute sinus of this angle: unit was not radians or degrees")}},{key:"cos",value:function(t){if(t.unit===n.DEGREES)return Math.cos(t.value*Math.PI/180);if(t.unit===n.RADIANS)return Math.cos(t.value);throw new Error("Could not compute cosinus of this angle: unit was not radians or degrees")}},{key:"sum",value:function(i,e){return new t(i.value+t.transformToUnit(e,i.unit).value,i.unit)}},{key:"multiply",value:function(i,e){return new t(i.value*e,i.unit)}}]),t}();!function(t){t.DEGREES="degrees",t.RADIANS="radians"}(n||(n={}));var j=function(){function t(i,e,o,s){Object(r.a)(this,t),this.position=void 0,this.width=void 0,this.height=void 0,this.rotation=void 0,this.position=i,this.width=o,this.height=e,this.rotation=null!==s&&void 0!==s?s:{angle:new O(0,n.DEGREES),origin:i}}return Object(h.a)(t,[{key:"translate",value:function(i){var e={x:this.position.x+i.x,y:this.position.y+i.y},n={x:this.rotation.origin.x+i.x,y:this.rotation.origin.y+i.y};return new t(e,this.height,this.width,{origin:n,angle:this.rotation.angle})}},{key:"rotate",value:function(i){return new t(this.position,this.height,this.width,{origin:this.rotation.origin,angle:O.sum(this.rotation.angle,i)})}},{key:"getBounds",value:function(){var t=this,i={x:this.position.x,y:this.position.y},e={x:this.position.x-this.height*this.rotation.angle.sin(),y:this.position.y+this.height*this.rotation.angle.cos()},n={x:this.position.x+this.width*this.rotation.angle.cos()-this.height*this.rotation.angle.sin(),y:this.position.y+this.width*this.rotation.angle.sin()+this.height*this.rotation.angle.cos()},o={x:this.position.x+this.width*this.rotation.angle.cos(),y:this.position.y+this.width*this.rotation.angle.sin()},s=(this.rotation.origin.x-this.position.x)*this.rotation.angle.cos()-(this.rotation.origin.y-this.position.y)*this.rotation.angle.sin(),a=(this.rotation.origin.x-this.position.x)*this.rotation.angle.sin()+(this.rotation.origin.y-this.position.y)*this.rotation.angle.cos();return[i,e,n,o].map((function(i){return{x:i.x+t.rotation.origin.x-t.position.x-s,y:i.y+t.rotation.origin.y-t.position.y-a}}))}},{key:"isPointInside",value:function(t){var i={x:t.x-this.rotation.origin.x,y:t.y-this.rotation.origin.y},e=i.x?i.x>0?Math.atan(i.y/i.x):Math.PI+Math.atan(i.y/i.x):i.x>0?0:Math.PI,o=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2)),s=o*O.sum(O.multiply(this.rotation.angle,-1),new O(e,n.RADIANS)).cos()+this.rotation.origin.x-this.position.x,a=o*O.sum(O.multiply(this.rotation.angle,-1),new O(e,n.RADIANS)).sin()+this.rotation.origin.y-this.position.y;return s<this.width&&a<this.height&&s>0&&a>0}},{key:"intersectWithLine",value:function(t){var i={x:t.point.x-this.rotation.origin.x,y:t.point.y-this.rotation.origin.y},e=i.x?i.x>0?Math.atan(i.y/i.x):Math.PI+Math.atan(i.y/i.x):i.x>0?0:Math.PI,o=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2)),s=o*O.sum(O.multiply(this.rotation.angle,-1),new O(e,n.RADIANS)).cos()+this.rotation.origin.x-this.position.x,a=o*O.sum(O.multiply(this.rotation.angle,-1),new O(e,n.RADIANS)).sin()+this.rotation.origin.y-this.position.y,c=t.direction.y/t.direction.x,r=a-c*s;return{top:(this.height-r)/c>0&&(this.height-r)/c<this.width,right:c*this.width+r>0&&c*this.width+r<this.height,bottom:-r/c>0&&-r/c<this.width,left:r>0&&r<this.height}}}],[{key:"isPointInside",value:function(t,i){return t.isPointInside(i)}}]),t}(),v=function(){function t(i,e,n,o){Object(r.a)(this,t),this._scene=void 0,this._collidedTimes=0,this._bulletObject=void 0,this._scene=i,this._bulletObject=this._scene.add.sprite(e.x,e.y,"bullet"),this._scene.physics.world.enable(this._bulletObject),this._bulletObject.body.setVelocity(n*o.cos(),n*o.sin()),this._bulletObject.rotation=O.transformToRadians(o).value}return Object(h.a)(t,[{key:"_getObjectAsRectangle",value:function(t){var i={origin:f.getObjectTrigoCoordinates({x:t.body.x+t.originX*t.width,y:t.body.y+t.originY*t.height}),angle:new O(-t.angle,n.DEGREES)};return new j(f.getObjectTrigoCoordinates(t.body.position),t.body.width,t.body.height,i)}},{key:"setColliderWithTank",value:function(t){t.setBulletObjectCollider(this._bulletObject)}},{key:"setObstacleCollider",value:function(t){var i=this;this._scene.physics.add.overlap(this._bulletObject,t,(function(t,e){return i.histTest(t,e)}))}},{key:"histTest",value:function(i,e){var n=this._getObjectAsRectangle(this._bulletObject),o=new j(f.getObjectTrigoCoordinates(e.body.position),e.body.width,e.body.height),s=n.getBounds().reduce((function(t,i){return o.isPointInside(i)||t}),!1),a=o.getBounds().reduce((function(t,i){return n.isPointInside(i)||t}),!1);if(s||a){var c=o.intersectWithLine({point:f.getObjectTrigoCoordinates(this._bulletObject.body.center),direction:f.getObjectTrigoCoordinates(this._bulletObject.body.velocity)});this._collidedTimes<t.maxCollisionTimes?(this.reflect(c),this._collidedTimes=this._collidedTimes+1):this._bulletObject.destroy()}}},{key:"reflect",value:function(t){var i=f.getObjectTrigoCoordinates(this._bulletObject.body.velocity),e={x:(i.x>0?t.left:t.right)?-i.x:i.x,y:(i.y>0?t.bottom:t.top)?-i.y:i.y},n=e.x?e.x>0?Math.atan(e.y/e.x):Math.PI+Math.atan(e.y/e.x):e.x>0?0:Math.PI;this._bulletObject.body.setVelocity(e.y,e.x),this._bulletObject.rotation=Math.PI/2-n}}]),t}();v.maxCollisionTimes=2;var f=function(){function t(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(r.a)(this,t),this.destroyed=!1,this._containerObject=void 0,this._vehicleObject=void 0,this._cannonObject=void 0,this._scene=void 0,this._velocity=160,this._angularVelocity=80,this._scene=i,this._containerObject=this._scene.add.container(e,n),this._containerObject.setSize(80,80),this._vehicleObject=this._scene.add.sprite(0,0,"tank"),this._cannonObject=this._scene.add.sprite(0,0,"cannon"),this._cannonObject.setOrigin(0,.5),this._scene.physics.world.enable(this._containerObject),this._scene.physics.world.enable(this._vehicleObject),this._scene.physics.world.enable(this._cannonObject),this._containerObject.addAt(this._vehicleObject,0),this._containerObject.addAt(this._cannonObject,1)}return Object(h.a)(t,[{key:"_getObjectAsRectangle",value:function(i){var e={origin:t.getObjectTrigoCoordinates({x:i.body.x+i.originX*i.width,y:i.body.y+i.originY*i.height}),angle:new O(-i.angle,n.DEGREES)};return new j(t.getObjectTrigoCoordinates(i.body.position),i.body.width,i.body.height,e)}},{key:"setBulletObjectCollider",value:function(t){var i=this;this._scene.physics.add.overlap(this._containerObject,t,(function(t,e){return i.bulletHitTest(t,e)}))}},{key:"bulletHitTest",value:function(i,e){var n=this._getObjectAsRectangle(this._cannonObject),o=this._getObjectAsRectangle(this._vehicleObject),s=new j(t.getObjectTrigoCoordinates(e.body.position),e.body.width,e.body.height),a=n.getBounds().reduce((function(t,i){return s.isPointInside(i)||t}),!1),c=o.getBounds().reduce((function(t,i){return s.isPointInside(i)||t}),!1),r=s.getBounds().reduce((function(t,i){return o.isPointInside(i)||t}),!1),h=s.getBounds().reduce((function(t,i){return n.isPointInside(i)||t}),!1);(a||h||c||r)&&this.destroy()}},{key:"setObstacleCollider",value:function(t){var i=this;this._scene.physics.add.overlap(this._containerObject,t,(function(t,e){return i.colliderHitTest(t,e)}))}},{key:"colliderHitTest",value:function(i,e){var n=this._getObjectAsRectangle(this._cannonObject),o=this._getObjectAsRectangle(this._vehicleObject),s=new j(t.getObjectTrigoCoordinates(e.body.position),e.body.width,e.body.height),a=n.getBounds().reduce((function(t,i){return s.isPointInside(i)||t}),!1),c=o.getBounds().reduce((function(t,i){return s.isPointInside(i)||t}),!1),r=s.getBounds().reduce((function(t,i){return o.isPointInside(i)||t}),!1),h=s.getBounds().reduce((function(t,i){return n.isPointInside(i)||t}),!1);if(a||h||c||r){var l={x:this._containerObject.x-e.body.center.x,y:this._containerObject.y-e.body.center.y};this.pushTank(l,3)}}},{key:"pushTank",value:function(t,i){var e=new O(this._vehicleObject.angle,n.DEGREES);this._containerObject.x=this._containerObject.x+Math.sign(t.x)*Math.abs(e.cos())*i,this._containerObject.y=this._containerObject.y+Math.sign(t.y)*Math.abs(e.sin())*i}},{key:"pointCannonToPoint",value:function(t,i){this._cannonObject.rotation=g.a.Math.Angle.Between(this._containerObject.x,this._containerObject.y,t,i)}},{key:"moveToDirection",value:function(t){var i=new O(this._vehicleObject.angle,n.DEGREES),e=O.sum(i,O.multiply(t,-1));Math.pow(e.sin(),2)<.01&&Math.pow(e.cos(),2)>.81?(this._vehicleObject.body.setAngularVelocity(0),this._containerObject.body.setVelocity(t.cos()*this._velocity,t.sin()*this._velocity)):(this._vehicleObject.body.setAngularVelocity(e.sin()*e.cos()<0?this._angularVelocity:-this._angularVelocity),this._containerObject.body.setVelocity(0,0))}},{key:"fire",value:function(t,i){var e=new O(g.a.Math.Angle.Between(this._containerObject.x,this._containerObject.y,t,i),n.RADIANS),o={x:this._containerObject.body.center.x+e.cos()*this._cannonObject.body.width,y:this._containerObject.body.center.y+e.sin()*this._cannonObject.body.width};return new v(this._scene,o,250,e)}},{key:"stop",value:function(){this._vehicleObject.body.setAngularVelocity(0),this._containerObject.body.setVelocity(0,0)}},{key:"destroy",value:function(){this.destroyed=!0,this._vehicleObject.destroy(),this._cannonObject.destroy(),this._containerObject.destroy()}}],[{key:"getObjectTrigoCoordinates",value:function(t){return{x:t.y,y:t.x}}}]),t}(),p=e(4),m=e.n(p),x=e(9),_=e(10),w=e(1);var T=function(t){Object(l.a)(e,t);var i=Object(u.a)(e);function e(){return Object(r.a)(this,e),i.apply(this,arguments)}return Object(h.a)(e,[{key:"componentDidMount",value:function(){var t,i,e,o={type:g.a.AUTO,width:800,height:500,parent:"game-canvas",scene:{preload:function(){var t=this;y.forEach((function(i){return t.load.image(i.name,i.path)}))},create:function(){this.add.image(400,250,"background"),i=this.input.keyboard.createCursorKeys(),(e=this.physics.add.staticGroup()).create(400,350,"obstacle"),e.create(200,150,"obstacle"),e.create(550,150,"obstacle"),(t=new f(this,25,20)).setObstacleCollider(e)},update:function(){if(!t.destroyed){var o=[i.up.isDown,i.right.isDown,i.down.isDown,i.left.isDown];o[0]&&o[2]||o[1]&&o[3]||!o.reduce((function(t,i){return t||i}),!1)?t.stop():t.moveToDirection(function(t){var i,e=Object(d.a)(t,4),o=e[0],s=e[1],a=e[2],c=e[3];if(function(t){t[t.TOP=-90]="TOP",t[t.TOPRIGHT=-45]="TOPRIGHT",t[t.RIGHT=0]="RIGHT",t[t.BOTTOMRIGHT=45]="BOTTOMRIGHT",t[t.BOTTOM=90]="BOTTOM",t[t.BOTTOMLEFT=135]="BOTTOMLEFT",t[t.LEFT=180]="LEFT",t[t.TOPLEFT=-135]="TOPLEFT"}(i||(i={})),m.a.isEqual([o,s,a,c],[!0,!1,!1,!1]))return new O(i.TOP,n.DEGREES);if(m.a.isEqual([o,s,a,c],[!0,!0,!1,!1]))return new O(i.TOPRIGHT,n.DEGREES);if(m.a.isEqual([o,s,a,c],[!1,!0,!1,!1]))return new O(i.RIGHT,n.DEGREES);if(m.a.isEqual([o,s,a,c],[!1,!0,!0,!1]))return new O(i.BOTTOMRIGHT,n.DEGREES);if(m.a.isEqual([o,s,a,c],[!1,!1,!0,!1]))return new O(i.BOTTOM,n.DEGREES);if(m.a.isEqual([o,s,a,c],[!1,!1,!0,!0]))return new O(i.BOTTOMLEFT,n.DEGREES);if(m.a.isEqual([o,s,a,c],[!1,!1,!1,!0]))return new O(i.LEFT,n.DEGREES);if(m.a.isEqual([o,s,a,c],[!0,!1,!1,!0]))return new O(i.TOPLEFT,n.DEGREES);throw new Error("Could not find the direction angle form input")}(o));var s=this.game.input.mousePointer;if(t.pointCannonToPoint(s.x,s.y),s.leftButtonDown()){var a=t.fire(s.x,s.y);a.setObstacleCollider(e),setTimeout((function(){a.setColliderWithTank(t)}),500)}}}},physics:{default:"arcade",arcade:{debug:!1}}};new g.a.Game(o)}},{key:"render",value:function(){return Object(w.jsx)("div",{className:"game-container",children:Object(w.jsxs)("div",{className:"d-flex",children:[Object(w.jsx)("div",{id:"game-canvas"}),Object(w.jsxs)("div",{className:"game-commands",children:[Object(w.jsxs)("div",{className:"game-command",children:[" ",Object(w.jsx)(x.a,{icon:_.a,className:"fa-w-16 command-icon"})," Move Tank "]}),Object(w.jsxs)("div",{className:"game-command",children:[" ",Object(w.jsx)(x.a,{icon:_.b,className:"fa-w-16 command-icon"})," Left click to shoot bullets "]}),Object(w.jsxs)("div",{className:"game-command",children:[" ",Object(w.jsx)(x.a,{icon:_.c,className:"fa-w-16 command-icon"})," Move mouse to move the cannon "]})]})]})})}}]),e}(o.Component);var E=function(){return Object(w.jsxs)("div",{className:"app-container",children:[Object(w.jsxs)("header",{class:"w-75",children:[Object(w.jsx)("h3",{class:"float-md-start mb-0",children:"Tanks Game"}),Object(w.jsxs)("nav",{class:"nav nav-masthead justify-content-center float-md-end",children:[Object(w.jsx)("a",{class:"nav-link active","aria-current":"page",href:"#",children:"Play"}),Object(w.jsx)("a",{class:"nav-link",href:"#",children:"Best scores"}),Object(w.jsx)("a",{class:"nav-link",href:"#",children:"Forum"})]})]}),Object(w.jsx)(T,{})]})},k=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,33)).then((function(i){var e=i.getCLS,n=i.getFID,o=i.getFCP,s=i.getLCP,a=i.getTTFB;e(t),n(t),o(t),s(t),a(t)}))};c.a.render(Object(w.jsx)(s.a.StrictMode,{children:Object(w.jsx)(E,{})}),document.getElementById("root")),k()}},[[32,1,2]]]);
//# sourceMappingURL=main.187a929c.chunk.js.map